# 裁定取引の収益性
ここでは約1年半かけて開発していた裁定取引システムの収益性についてお話ししたいと思います。
裁定取引の概要とそのシステムは[こちら](https://paulhindemith.hatenablog.com/entry/2022/02/26/164810)。<br>
**一応バグのチェックやシミュレーションの信憑性を私は信じていますが、保証するものではございませんので、ブログにアップする程度の内容ですから、その点ご了承頂きますようよろしくお願いいたします。**

### シミュレーションの概要
実際の価格データを使って、取引所に預ける資産量と一回当たり取引量をパラメータとして、利益を算出するプログラムを書きました。<br>
ここでの利益とは1日の利益のことです。データは12時間のデータですが12時間で得られた利益を単純に2倍することによって計算しています。<br>
資産量は20万円、40万円、100万円、200万円、400万円、1000万円、2000万円のケースで計算しています。
例えば資産量20万円の場合、2つの取引所にそれぞれ10万円ずつ配分することを意味します。<br>
指定した価格で必ず約定すればいいのですが、実際の取引においては数ms~数十ms遅いばかりに指定した価格で約定できない場合があるので、約定確率をパラメータとして加えることができます。今回は50%に設定しています。<br>
またシミュレーションは単純化のため、CoincheckとGMOコインの2つの取引所で裁定取引を行うこととします。<br>
手数料はCoincheckとGMOコインではかかりませんので、0としています。(GMOコインではレバレッジ取引で指定時刻時に保有していると手数料がかかりますがここでは0としています。)

### データの例
データは2022年3月2日2時から同日14時までの12時間の価格データを使用します。
ここでの価格データとは板を参照して実際に指定した数量で売買できる量を示し、直近の約定価格ではありません。
データの例は以下の通りです。
![データの例](https://cdn-ak.f.st-hatena.com/images/fotolife/p/paulhindemith/20220303/20220303002420.png)
※TimeはUnix TimeでNanosecondです。SatoshiとはBitcoinの最小単位のこと。Priceはドル建てと日本円が混在しています。Ask(=2)とは買うことのできる価格のことで、Bid(=1)はその反対です。

### シミュレーションの結果
結果は以下の通りです。資産量と一回当たり取引量のパラメータがあるのですが、資産量を横軸、利益を縦軸、取引量をラベルという形で表現しました。取引量ラベルの0.01とは0.01Bitcoinのことであり、これは1000000Satoshiと同じ量です。<br>
結果は、例えば資産量1000万円の時、2つの取引所にそれぞれ500万円ずつ預けたとして、資産量に対して1日に7万円程度利益がでたということを表します。<br>
また折線の影は信頼区間で95%です。これは、約定確率が1より小さいため、表示しています。それぞれ100回ずつシミュレーションしました。
![結果](https://cdn-ak.f.st-hatena.com/images/fotolife/p/paulhindemith/20220303/20220303003720.png)

### 終わりに
これまでのシミュレーションの経験則では、資産量に対して概ね1%前後で推移しますが、資産量が多くなる程、利益率が低下します。
CoincheckとGMOコインのみならず、世界の取引所でメッシュな裁定取引を行うことが目標でした。<br>
現実の取引では取引所と同期することなく連続的に取引を行わないといけないので、そのようなシステムを作るのに大変苦労しておりました。<br>
メッシュな裁定取引システム以前に2取引所間のシステムも満足に開発できなかったのですが、長い時間をかけて取り組むにたるシミュレーション結果だったので、これまでなんとか続けてこれたのだと思います。
